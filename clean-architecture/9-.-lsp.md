# 9장. LSP: 리스코프 치환 법칙

1988년 바바라 리스코프는 하위타입을 아래와 같이 정의 했다.

> 여기에서 필요한 것은 다음과 같은 치환 원칙이다. S 타입의 객체 o1 각각에 대응하는 T 타입 객체 o2가 있고, T 타입을 이용해서 정의한 모든 프로그램 P에서 o2의 자리에 o1을 치환하더라도 P의 행위가 변하지 않는다면, S는 T의 하위 타입이다.

### 상속을 사용하도록 가이드하기 

Billing 어플리케이션, License 클래스, 하위 타입 PersonalLicense, BusinessLicense가 있을 때 두 하위 타입은 서로 다른 알고리즘을 이용해서 라이선스 비용을 계산한다.

여기서 Billing 어플리케이션의 행위는 License 하위 타입 중에서 무엇을 사용하는지에 전혀 의존하지 않는다. 즉, 하위 타입은 모두 License 타입을 치환할 수 있다.

### 정사각형/직사각형 문제 

Square\(정사각형\)은 Rectangle\(직사각형\)의 하위 타입으로 적합하지 않다.

Rectangle은 높이와 너비가 서로 독립적으로 변경된다. 반면에 Square는 높이와 너비가 함께 변경된다.

이렇게 되면 해당 객체를 사용하는 사용자의 행위가 사용하는 타입에 의존하게 된다. -&gt; 타입을 서로 치환할 수 없다.

### LSP와 아키텍처 

LSP는 인터페이스와 구현체에도 적용되는 광범위한 소프트웨어 설계 원칙으로 변모해왔다.

인터페이스는 자바스러운 언어의 인터페이스 하나와 여러 구현체, 루비의 동일한 메서드 시그니처를 공유는 여러 개의 클래스, 동일한 REST 인터페이스에 응답하는 서비스 집단일 수도 있다.

이러한 상황 이외의 더 많은 경우에 LSP를 적용할 수 있다. 잘 정의된 인터페이스와 그 인터페이스의 구현체끼리의 상호 치환 가능성에 기대는 사용자들이 존재하기 때문이다.

### 결론 

LSP는 아키텍처 수준까지 확장할 수 있고, 반드시 확장해야만 한다.

