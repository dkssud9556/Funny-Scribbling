# 11장. DIP: 의존성 역전 원칙

DIP에서 말하는, 유연성이 극대화된 시스템이란 소스 코드 의존성이 **추상에 의존**하며 **구체에는 의존하지 않는** 시스템이다.

use, import, include와 같은 구문은 오직 추상적인 선언만을 참조해야 한다는 뜻이다. 하지만 현실적으로 힘들다. String 클래스만 해도 그렇다. 하지만 String 클래스는 매우 안정적이다. String 클래스가 변경될 일은 거의 없기 때문이다. String 클래스에서 변경이 자주 발생하리라고 염려할 필요가 없다.

우리가 피해야 하는 것은 변동성이 큰 구체적인 요소이다.

### 안정된 추상화 

하지만 인터페이스에 변경이 생기면 그 인터페이스를 구체화한 구현체들도 변경이 필요해진다. 그렇기 때문에 인터페이스의 변동성을 낮추기 위해 노력해야 한다.

DIP에서 전달하려는 내용은 다음과 같이 매우 구체적인 코딩 실천법으로 요약할 수 있다.

* 변동성이 큰 구체 클래스를 참조하지 말라.

  대신 추상 인터페이스를 참조해야 한다. 이 규칙은 객체 생성 방식을 강하게 제약하며, 일반적으로 추상 팩토리를 사용하도록 강제한다.

* 변동성이 큰 구체 클래스로부터 파생하지 말라.

  정적 타입 언어에서 상속은 소스 코드에 존재하는 모든 관계 중에서 가장 강력한 동시에 뻣뻣해서 변경하기 어렵다. 상속을 아주 신중하게 해야 한다.

* 구체 함수를 오버라이드 하지 말라.

  구체 함수를 오버라이드하면 의존성이 생기게 된다. 차라리 추상 함수로 선언하고 구현체들에서 각자의 용도에 맞게 구현해야 한다.

* 구체적이며 변동성이 크다면 절대로 그 이름을 언급하지 말라.

### 팩토리 

변동성이 큰 구체적인 객체는 특별히 주의해서 생성해야 한다. 객체를 생성하려면 해당 객체를 구체적으로 정의한 코드에 대해 소스 코드 의존성이 발생하기 때문이다.

이처럼 바람직하지 못한 의존성을 처리할 때 추상 팩토리를 사용한다.

